{% load static %}

{% with link_class="text-white hover:text-pink-400 block px-3 py-2 rounded-md text-base font-medium" %}

{% if user.is_authenticated %}
    {% if user.is_superuser %}
        <a href="{% url 'admin_dashboard_page' %}" class="{{ link_class }} {% if request.path == '/dashboard' %}nav-link-active{% endif %}">Dashboard</a>
    {% else %}
        <a href="{% url 'home' %}" class="{{ link_class }} {% if request.path == '/' %}nav-link-active{% endif %}">Home</a>
    {% endif %}

    <a href="/challenges" class="{{ link_class }} {% if 'challenges' in request.path %}nav-link-active{% endif %}">Challenges</a>
    <a href="/leaderboards" class="{{ link_class }} {% if 'leaderboards' in request.path %}nav-link-active{% endif %}">Leaderboards</a>
    <a href="/about" class="{{ link_class }} {% if 'about' in request.path %}nav-link-active{% endif %}">About</a>

    <div class="relative group">
        <button class="flex items-center space-x-2 focus:outline-none w-full text-left {{ link_class }}">
            <img src="{% static 'accounts/images/empty_profile.jpg' %}" alt="Profile" class="h-8 w-8 rounded-full border border-gray-600">
            <span>{{ user.username }}</span>
            <svg class="h-4 w-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
        </button>
        <div class="absolute right-0 mt-0 w-48 bg-gray-800 rounded-lg shadow-lg py-2 z-20 hidden group-hover:block">
            <a href="{% url 'logout_page' %}" class="block px-4 py-2 text-gray-300 hover:bg-gray-700 hover:text-white transition">Logout</a>
        </div>
    </div>
    
{% else %}
    <a href="{% url 'home' %}" class="{{ link_class }} {% if request.path == '/' %}nav-link-active{% endif %}">Home</a>
    <a href="/about" class="{{ link_class }} {% if 'about' in request.path %}nav-link-active{% endif %}">About</a>
    <a href="{% url 'login_page' %}" class="px-4 py-2 bg-pink-600 hover:bg-pink-700 rounded-lg shadow font-medium">Login</a>
    <a href="{% url 'register_page' %}" class="px-4 py-2 bg-white text-gray-900 hover:bg-gray-200 rounded-lg shadow font-medium">Register</a>
{% endif %}

{% endwith %}